import{u as L,y as P,o as N,l as j,c as a,a as t,d as u,w as m,t as l,f as p,q as F,z as A,F as k,e as w,k as c,A as M,g as B,s as D,i as b,h as E,B as X,j as o,m as R,C as T}from"./index-Dwbu1JKQ.js";const q={key:0,class:"container my-5 text-center"},G={key:1,class:"container my-5"},I={"aria-label":"breadcrumb"},O={class:"breadcrumb"},U={class:"breadcrumb-item"},W={class:"breadcrumb-item"},$={class:"breadcrumb-item active","aria-current":"page"},H={class:"row g-5"},J={class:"col-md-6"},K={class:"p-4 bg-white rounded shadow-sm d-flex align-items-center justify-content-center border position-relative",style:{"min-height":"400px"}},Q={key:0,class:"badge bg-danger position-absolute top-0 start-0 m-3 fs-5 px-3 py-2"},Y=["src","alt"],Z={key:2,class:"text-center text-muted"},tt={class:"col-md-6"},et={class:"text-muted text-uppercase fw-bold"},st={class:"display-5 fw-bold mb-3"},at={class:"d-flex align-items-center mb-4"},ot={class:"fs-2 fw-bold text-dark me-3"},lt={key:0,class:"fs-5 text-muted text-decoration-line-through"},it={class:"lead mb-4"},nt={class:"mb-4"},dt={class:"badge bg-light text-dark border me-2 p-2"},rt={class:"badge bg-light text-dark border me-2 p-2"},ct={key:0,class:"mb-4"},ut={class:"d-flex flex-wrap gap-2"},mt=["id","value"],bt=["for"],pt={class:"d-grid gap-2 d-md-flex justify-content-md-start"},vt=["disabled"],_t={key:0,class:"mt-5"},gt={class:"row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4"},ft={class:"card h-100 border-0 shadow-sm"},ht={class:"bg-white p-3 rounded-top d-flex align-items-center justify-content-center",style:{height:"200px"}},xt=["src"],yt={key:1,class:"text-muted"},kt={class:"card-body text-center"},wt={class:"card-title text-truncate"},St={class:"card-text fw-bold"},Ct={key:2,class:"container my-5 text-center"},Lt={__name:"ProductDetailView",setup(zt){const f=D(),S=L();P();const s=b(null),v=b([]),r=b(null),h=b(1),_=b(!0),x=async d=>{_.value=!0;try{const e=await B.get(`/api/products/${d}`);s.value=e.data.data,e.data.additional&&(v.value=e.data.additional.related),r.value=null,h.value=1;const i=y.value;i.length>0&&(r.value=i[0])}catch(e){console.error("Error fetching product:",e)}finally{_.value=!1}};N(()=>{x(f.params.id)}),j(()=>f.params.id,d=>{x(d)});const y=X(()=>{if(!s.value)return[];const d=s.value.categoria.toLowerCase();return d.includes("zapatillas")||d.includes("calzado")||d.includes("botas")?Array.from({length:9},(e,i)=>i+38):d.includes("calcetines")?["S (34-38)","M (38-42)","L (42-46)"]:["XS","S","M","L","XL","XXL"]}),C=()=>{if(!r.value){alert("Por favor selecciona una talla.");return}S.addToCart(s.value,r.value,h.value),alert("Producto añadido al carrito")},z=()=>{alert("Funcionalidad de lista de deseos próximamente.")};return(d,e)=>{const i=E("router-link");return _.value?(o(),a("div",q,[...e[1]||(e[1]=[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Cargando...")],-1)])])):s.value?(o(),a("div",G,[t("nav",I,[t("ol",O,[t("li",U,[u(i,{to:{name:"home"},class:"text-decoration-none text-muted"},{default:m(()=>[...e[2]||(e[2]=[c("Inicio",-1)])]),_:1})]),t("li",W,[u(i,{to:{name:"products"},class:"text-decoration-none text-muted"},{default:m(()=>[...e[3]||(e[3]=[c("Productos",-1)])]),_:1})]),t("li",$,l(s.value.nombre),1)])]),t("div",H,[t("div",J,[t("div",K,[s.value.oferta?(o(),a("span",Q,"Oferta")):p("",!0),s.value.image_url?(o(),a("img",{key:1,src:s.value.image_url,alt:s.value.nombre,class:"img-fluid",style:{"max-height":"400px","object-fit":"contain"}},null,8,Y)):(o(),a("div",Z,[...e[4]||(e[4]=[t("i",{class:"bi bi-image",style:{"font-size":"5rem"}},null,-1),t("p",null,"Sin imagen",-1)])]))])]),t("div",tt,[t("h6",et,l(s.value.marca),1),t("h1",st,l(s.value.nombre),1),t("div",at,[t("span",ot,l(Number(s.value.precio).toFixed(2))+" €",1),s.value.oferta?(o(),a("span",lt,l((s.value.precio*1.2).toFixed(2))+" €",1)):p("",!0)]),t("p",it,l(s.value.descripcion||"Sin descripción disponible."),1),t("div",nt,[t("span",dt,l(s.value.sexo),1),t("span",rt,l(s.value.categoria),1),t("span",{class:F(["badge p-2",s.value.stock>0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"])},l(s.value.stock>0?"En Stock":"Agotado"),3)]),t("form",{onSubmit:A(C,["prevent"])},[s.value.stock>0?(o(),a("div",ct,[e[5]||(e[5]=t("label",{class:"form-label fw-bold"},"Selecciona tu talla:",-1)),t("div",ut,[(o(!0),a(k,null,w(y.value,(n,g)=>(o(),a("div",{key:g},[R(t("input",{type:"radio",class:"btn-check",name:"talla",id:"size_"+g,value:n,"onUpdate:modelValue":e[0]||(e[0]=V=>r.value=V)},null,8,mt),[[T,r.value]]),t("label",{class:"btn btn-outline-dark",for:"size_"+g},l(n),9,bt)]))),128))])])):p("",!0),t("div",pt,[t("button",{type:"submit",class:"btn btn-dark btn-lg px-4 flex-grow-1",disabled:!s.value.stock},[...e[6]||(e[6]=[t("i",{class:"bi bi-cart-plus me-2"},null,-1),c(" Añadir al carrito ",-1)])],8,vt),t("button",{type:"button",onClick:z,class:"btn btn-outline-danger btn-lg px-4"},[...e[7]||(e[7]=[t("i",{class:"bi bi-heart"},null,-1)])])])],32),e[8]||(e[8]=M('<hr class="my-5"><div class="small text-muted"><p class="mb-1"><i class="bi bi-truck me-2"></i> Envío gratis en pedidos superiores a 50€</p><p class="mb-1"><i class="bi bi-arrow-repeat me-2"></i> Devoluciones gratuitas en 30 días</p><p class="mb-0"><i class="bi bi-shield-check me-2"></i> Garantía de 2 años</p></div>',2))])]),v.value.length>0?(o(),a("div",_t,[e[11]||(e[11]=t("hr",{class:"my-5"},null,-1)),e[12]||(e[12]=t("h3",{class:"mb-4 fw-bold"},"Productos Relacionados",-1)),t("div",gt,[(o(!0),a(k,null,w(v.value,n=>(o(),a("div",{key:n.id,class:"col"},[t("div",ft,[t("div",ht,[n.image_url?(o(),a("img",{key:0,src:n.image_url,class:"img-fluid",style:{"max-height":"100%","object-fit":"contain"}},null,8,xt)):(o(),a("div",yt,[...e[9]||(e[9]=[t("i",{class:"bi bi-image"},null,-1)])]))]),t("div",kt,[t("h6",wt,[u(i,{to:{name:"product-detail",params:{id:n.id}},class:"text-decoration-none text-dark"},{default:m(()=>[c(l(n.nombre),1)]),_:2},1032,["to"])]),t("p",St,l(Number(n.precio).toFixed(2))+" €",1),u(i,{to:{name:"product-detail",params:{id:n.id}},class:"btn btn-sm btn-outline-dark w-100"},{default:m(()=>[...e[10]||(e[10]=[c("Ver producto",-1)])]),_:1},8,["to"])])])]))),128))])])):p("",!0)])):(o(),a("div",Ct,[e[14]||(e[14]=t("h3",null,"Producto no encontrado",-1)),u(i,{to:{name:"products"},class:"btn btn-dark mt-3"},{default:m(()=>[...e[13]||(e[13]=[c("Volver a la tienda",-1)])]),_:1})]))}}};export{Lt as default};
