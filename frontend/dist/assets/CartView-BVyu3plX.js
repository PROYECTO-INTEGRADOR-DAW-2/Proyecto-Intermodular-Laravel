import{u as w,o as C,c as o,a as t,p as i,F as p,e as h,t as a,d as _,w as f,h as k,x as j,j as n,f as T,k as g}from"./index-Dwbu1JKQ.js";const N={class:"container my-5"},F={key:0,class:"text-center py-5"},A={key:1},V={class:"d-none d-md-block table-responsive shadow-sm border rounded-4 overflow-hidden mb-5"},D={class:"table table-hover align-middle mb-0 bg-white"},L={class:"py-4 ps-5"},O={class:"d-flex align-items-center"},z={class:"bg-light rounded-3 p-2 me-4 shadow-sm",style:{width:"100px",height:"100px",display:"flex","align-items":"center","justify-content":"center"}},S=["src","alt"],B={key:1,class:"bi bi-image text-muted"},E={class:"fw-bold fs-5"},I={class:"text-muted small"},R={class:"py-4 text-center fw-bold"},P={class:"py-4 text-center"},q=["value","onChange"],U={class:"py-4 text-center fs-5"},$={class:"py-4 text-center fs-5 fw-bold text-success"},M={class:"py-4 text-center pe-5"},Q=["onClick"],G={class:"row row-cols-1 g-4 d-md-none"},H={class:"card h-100 shadow border-0 rounded-4 overflow-hidden"},J={class:"bg-light d-flex align-items-center justify-content-center p-4",style:{"min-height":"200px"}},K=["src","alt"],W={class:"card-body p-4"},X={class:"d-flex justify-content-between align-items-start mb-3"},Y={class:"fw-bold fs-4 mb-0"},Z=["onClick"],tt={class:"row g-3 mb-3"},st={class:"col-6"},et={class:"fs-5"},ot={class:"col-6"},nt=["value","onChange"],lt={class:"d-flex justify-content-between align-items-center pt-3 border-top"},at={class:"fw-bold text-success fs-3"},dt={class:"row mt-5 justify-content-center justify-content-md-end"},ct={class:"col-12 col-md-5 col-xl-4"},it={class:"card border-0 shadow rounded-4 bg-dark text-white p-4"},rt={class:"d-flex justify-content-between align-items-center mb-0"},ut={class:"fs-1 fw-bold text-success"},mt={class:"d-flex flex-column flex-md-row justify-content-between align-items-stretch align-items-md-center gap-3 mt-4"},bt={key:2,class:"text-center py-5 bg-light rounded shadow-sm"},_t={__name:"CartView",setup(pt){const l=w(),x=j();C(()=>{l.fetchDetails()});const u=(r,s)=>{s<1||l.updateQuantity(r,s)},m=r=>{confirm("¿Estás seguro de eliminar este producto del carrito?")&&l.removeFromCart(r)},y=()=>{confirm("¿Vaciar todo el carrito?")&&l.clearCart()},v=()=>{alert("Funcionalidad de pago mockeada: ¡Compra realizada con éxito!"),l.clearCart(),x.push({name:"home"})};return(r,s)=>{const b=k("router-link");return n(),o("main",N,[s[11]||(s[11]=t("h1",{class:"text-center mb-5"},"Tu Carrito de Compras",-1)),i(l).isLoading?(n(),o("div",F,[...s[0]||(s[0]=[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Cargando...")],-1)])])):i(l).items.length>0?(n(),o("div",A,[t("div",V,[t("table",D,[s[2]||(s[2]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",{scope:"col",class:"py-4 ps-5"},"PRODUCTO"),t("th",{scope:"col",class:"py-4 text-center"},"TALLA"),t("th",{scope:"col",class:"py-4 text-center"},"CANTIDAD"),t("th",{scope:"col",class:"py-4 text-center"},"PRECIO"),t("th",{scope:"col",class:"py-4 text-center"},"SUBTOTAL"),t("th",{scope:"col",class:"py-4 text-center pe-5"},"ACCIONES")])],-1)),t("tbody",null,[(n(!0),o(p,null,h(i(l).details,(e,d)=>(n(),o("tr",{key:d},[t("td",L,[t("div",O,[t("div",z,[e.image?(n(),o("img",{key:0,src:e.image,alt:e.name,class:"img-fluid",style:{"max-height":"80px","object-fit":"contain"}},null,8,S)):(n(),o("i",B))]),t("div",null,[t("div",E,a(e.name),1),t("div",I,"ID: #"+a(e.product_id),1)])])]),t("td",R,a(e.size),1),t("td",P,[t("input",{type:"number",class:"form-control border-2 text-center fw-bold d-inline-block",style:{width:"80px"},value:e.quantity,min:"1",onChange:c=>u(d,c.target.value)},null,40,q)]),t("td",U,a(Number(e.price).toFixed(2))+" €",1),t("td",$,a(Number(e.subtotal).toFixed(2))+" €",1),t("td",M,[t("button",{class:"btn btn-outline-danger btn-sm rounded-circle p-2 shadow-sm",onClick:c=>m(d)},[...s[1]||(s[1]=[t("i",{class:"bi bi-trash fs-5"},null,-1)])],8,Q)])]))),128))])])]),t("div",G,[(n(!0),o(p,null,h(i(l).details,(e,d)=>(n(),o("div",{key:d,class:"col"},[t("div",H,[t("div",J,[e.image?(n(),o("img",{key:0,src:e.image,alt:e.name,class:"img-fluid",style:{"max-height":"150px","object-fit":"contain"}},null,8,K)):T("",!0)]),t("div",W,[t("div",X,[t("h3",Y,a(e.name),1),t("button",{class:"btn btn-outline-danger btn-sm rounded-circle p-2",onClick:c=>m(d)},[...s[3]||(s[3]=[t("i",{class:"bi bi-trash fs-5"},null,-1)])],8,Z)]),t("div",tt,[t("div",st,[s[4]||(s[4]=t("small",{class:"text-muted fw-bold d-block"},"Talla",-1)),t("span",et,a(e.size),1)]),t("div",ot,[s[5]||(s[5]=t("small",{class:"text-muted fw-bold d-block"},"Cantidad",-1)),t("input",{type:"number",class:"form-control",value:e.quantity,min:"1",onChange:c=>u(d,c.target.value)},null,40,nt)])]),t("div",lt,[t("span",at,a(Number(e.subtotal).toFixed(2))+" €",1)])])])]))),128))]),t("div",dt,[t("div",ct,[t("div",it,[t("div",rt,[s[6]||(s[6]=t("span",{class:"fs-3 fw-bold"},"TOTAL:",-1)),t("span",ut,a(Number(i(l).total).toFixed(2))+" €",1)])])])]),t("div",mt,[_(b,{to:{name:"products"},class:"btn btn-outline-secondary order-2 order-md-1"},{default:f(()=>[...s[7]||(s[7]=[t("i",{class:"bi bi-arrow-left"},null,-1),g(" Continuar comprando ",-1)])]),_:1}),t("div",{class:"d-flex flex-column flex-md-row gap-2 order-1 order-md-2"},[t("button",{onClick:y,class:"btn btn-outline-danger"},"Vaciar Carrito"),t("button",{onClick:v,class:"btn btn-success px-4 fw-bold shadow-sm"},"Finalizar Compra")])])])):(n(),o("div",bt,[s[9]||(s[9]=t("h3",null,"Tu carrito está vacío",-1)),s[10]||(s[10]=t("p",{class:"text-muted mb-4"},"¡Añade algunos productos para empezar!",-1)),_(b,{to:{name:"products"},class:"btn btn-dark px-4 py-2"},{default:f(()=>[...s[8]||(s[8]=[g("Ver Productos",-1)])]),_:1})]))])}}};export{_t as default};
